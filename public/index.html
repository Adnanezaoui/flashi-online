<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POLO - Ù„Ø¹Ø¨Ø© Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØµÙˆØ±</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo','Segoe UI',sans-serif; }
    body { background: linear-gradient(145deg,#0a1c23 0%,#06242e 100%); display:flex; justify-content:center; align-items:center; min-height:100vh; padding:15px; color:white; }
    .page { text-align:center; }
    .btn { padding:10px 20px; border-radius:40px; border:none; cursor:pointer; margin:5px; font-size:18px; }
    .game-wrapper { display:none; flex-direction:column; gap:15px; align-items:center; }
    .game-canvas { width:400px; height:250px; border-radius:25px; border:4px solid #97d4d4; background:#f0f0f0; display:flex; align-items:center; justify-content:center; cursor:pointer; background-size:cover; background-position:center; }
    .score-timer { display:flex; justify-content:space-around; width:100%; margin-top:15px; font-size:18px; }
    .level-result { margin-top:15px; background:#fbdfa5; padding:10px; border-radius:20px; color:#1a4a55; text-align:center; display:none; }
</style>
</head>
<body>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="mainPage" class="page">
    <h1 style="font-size:50px; margin-bottom:20px;">ğŸ”¥ POLO ğŸ”¥</h1>
    <input type="text" id="playerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:10px 20px; border-radius:40px; border:none; font-size:18px; margin-bottom:15px;"><br>
    <input type="password" id="playerPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="padding:10px 20px; border-radius:40px; border:none; font-size:18px; margin-bottom:15px;"><br>
    <button id="enterBtn" class="btn" style="background:#fecb57;">Ø¯Ø®ÙˆÙ„</button>
    <p id="mainError" style="color:red; margin-top:10px;"></p>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div class="game-wrapper" id="gamePage">
    <h2 id="welcomePlayer"></h2>
    <div id="adminControls" style="margin-bottom:10px;">
        <button id="startGameBtn" class="btn" style="background:#4caf50;">â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        <button id="stopGameBtn" class="btn" style="background:#f44336;">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <div id="countdown" style="font-size:24px; margin:10px 0; display:none;"></div>

    <div class="game-canvas" id="leftImage">ØµÙˆØ±Ø© Ø£</div>
    <div class="game-canvas" id="rightImage">ØµÙˆØ±Ø© Ø¨</div>

    <div class="score-timer">
        <div>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="scoreDisplay">0</span></div>
        <div>Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span id="differencesLeft">0</span></div>
    </div>

    <div id="levelResult" class="level-result"></div>
</div>

<script>
let playerNameText = '';
let isAdmin = false;
let gameActive = false;
let currentLevel = 0;
let currentScore = 0;
let differencesLeft = 0;
let countdownInterval;

// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
const levels = [];
function generateLevels(){
    const colors = ['red','green','blue','yellow','purple','orange','pink','cyan'];
    for(let i=0;i<8;i++){
        const canvas1 = document.createElement('canvas');
        canvas1.width=400; canvas1.height=250;
        const ctx1 = canvas1.getContext('2d');
        ctx1.fillStyle = colors[i];
        ctx1.fillRect(0,0,400,250);

        const canvas2 = document.createElement('canvas');
        canvas2.width=400; canvas2.height=250;
        const ctx2 = canvas2.getContext('2d');
        ctx2.fillStyle = colors[i];
        ctx2.fillRect(0,0,400,250);

        // Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        const diffCount = 5 + i; // Ù…Ù† 5 Ø¥Ù„Ù‰ 12 Ø§Ø®ØªÙ„Ø§Ù
        for(let j=0;j<diffCount;j++){
            const x = Math.random()*380 + 10;
            const y = Math.random()*230 + 10;
            ctx2.fillStyle = '#ffffff';
            ctx2.fillRect(x,y,10,10);
        }
        levels.push({left:canvas1.toDataURL(), right:canvas2.toDataURL(), differences:diffCount});
    }
}

generateLevels();

// Ø¯Ø®ÙˆÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
document.getElementById('enterBtn').addEventListener('click',()=>{
    const name = document.getElementById('playerName').value.trim();
    const password = document.getElementById('playerPassword').value.trim();
    const errorEl = document.getElementById('mainError');
    errorEl.innerText='';

    if(password !== 'POLO FAMILY'){ errorEl.innerText='âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'; return; }
    if(name===''){ errorEl.innerText='âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…'; return; }

    playerNameText = name;
    isAdmin = true; // Ø£ÙˆÙ„ Ù„Ø§Ø¹Ø¨ ÙŠØµØ¨Ø­ Ø£Ø¯Ù…Ù†
    document.getElementById('mainPage').style.display='none';
    document.getElementById('gamePage').style.display='flex';
    document.getElementById('welcomePlayer').innerText=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${playerNameText}`;
});

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
document.getElementById('startGameBtn').addEventListener('click',()=>{
    if(gameActive) return;
    let countdown = 10;
    const countdownEl = document.getElementById('countdown');
    countdownEl.style.display='block';
    countdownEl.innerText=`â³ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¨Ø¹Ø¯ ${countdown} Ø«ÙˆØ§Ù†ÙŠ`;

    countdownInterval = setInterval(()=>{
        countdown--;
        if(countdown>0){ countdownEl.innerText=`â³ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¨Ø¹Ø¯ ${countdown} Ø«ÙˆØ§Ù†ÙŠ`; }
        else {
            clearInterval(countdownInterval);
            countdownEl.style.display='none';
            startLevel();
        }
    },1000);
});

document.getElementById('stopGameBtn').addEventListener('click',()=>{
    gameActive=false;
    alert('ğŸ›‘ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø¯Ù…Ù†');
});

function startLevel(){
    gameActive=true;
    currentScore=0;
    currentLevel = 0;
    loadLevel(currentLevel);
}

function loadLevel(index){
    const level = levels[index];
    document.getElementById('leftImage').style.backgroundImage = `url(${level.left})`;
    document.getElementById('rightImage').style.backgroundImage = `url(${level.right})`;
    differencesLeft = level.differences;
    document.getElementById('differencesLeft').innerText = differencesLeft;
    document.getElementById('scoreDisplay').innerText = currentScore;
    document.getElementById('levelResult').style.display='none';
}

[leftImage,rightImage].forEach(img => img.addEventListener('click',()=>{
    if(!gameActive) return;
    currentScore++;
    differencesLeft--;
    document.getElementById('scoreDisplay').innerText=currentScore;
    document.getElementById('differencesLeft').innerText=differencesLeft;
    if(differencesLeft<=0){
        document.getElementById('levelResult').style.display='block';
        document.getElementById('levelResult').innerText=`ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©! Ø§Ù„Ù†Ù‚Ø§Ø·: ${currentScore}`;
        setTimeout(()=>{
            currentLevel = (currentLevel+1)%levels.length;
            loadLevel(currentLevel);
        },3000);
    }
});
</script>

</body>
</html>
