<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POLO - Ù„Ø¹Ø¨Ø© Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØµÙˆØ±</title>
<style>
    * {margin:0; padding:0; box-sizing:border-box; font-family:'Cairo','Segoe UI',sans-serif;}
    body {background: linear-gradient(145deg,#0a1c23 0%,#06242e 100%); display:flex; justify-content:center; align-items:center; min-height:100vh;}
    #loginPage, #gamePage, #roundResult {width:100%; max-width:1200px; color:white; text-align:center;}
    input, button {font-size:18px; padding:12px 20px; border-radius:40px; border:none; outline:none;}
    button {cursor:pointer; background:#fecb57; font-weight:bold; transition:.2s; margin:10px;}
    button:hover {opacity:.85;}
    #gamePage {display:none;}
    .game-wrapper {display:flex; flex-wrap:wrap; justify-content:center; gap:20px;}
    .main-game, .sidebar {background:#1f5568; border-radius:30px; padding:20px; min-width:300px;}
    .main-game {flex:2;}
    .sidebar {flex:1;}
    .images-row {display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin:20px 0;}
    .game-canvas {width:320px; height:220px; border-radius:20px; border:3px solid #97d4d4; overflow:hidden; cursor:pointer;}
    .game-canvas img {width:100%; height:100%; object-fit:cover;}
    .scoreboard, .round-timer {background:#0b323b; padding:15px 20px; border-radius:30px; font-size:20px; margin:10px;}
    .player-list {background:#163a47; border-radius:20px; padding:10px; margin-top:20px; text-align:right; color:white;}
    .player-item {display:flex; justify-content:space-between; margin:5px 0; padding:5px 10px; background:#1e4e5c; border-radius:15px;}
    .admin-controls {margin-top:20px;}
</style>
</head>
<body>

<!-- ===== Landing / Login Page ===== -->
<div id="loginPage">
    <h1 style="font-size:60px; margin-bottom:30px;">ğŸ”¥ POLO ğŸ”¥</h1>
    <input type="text" id="playerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ"><br><br>
    <input type="password" id="gamePassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"><br><br>
    <button onclick="enterGame()">Ø¯Ø®ÙˆÙ„</button>
    <p id="loginError" style="color:red; margin-top:10px;"></p>
</div>

<!-- ===== Game Page ===== -->
<div id="gamePage">
    <h2 id="welcomePlayer"></h2>
    <div class="game-wrapper">
        <div class="main-game">
            <div class="images-row">
                <div class="game-canvas"><img id="leftImg" src=""></div>
                <div class="game-canvas"><img id="rightImg" src=""></div>
            </div>
            <div class="scoreboard">
                Ù†Ù‚Ø§Ø·Ùƒ: <span id="playerScore">0</span>
            </div>
            <div class="round-timer">
                ÙˆÙ‚Øª Ø§Ù„Ø¬ÙˆÙ„Ø©: <span id="roundTimer">15</span> Ø«Ø§Ù†ÙŠØ©
            </div>
            <div class="admin-controls" id="adminControls" style="display:none;">
                <button onclick="startRound()">â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
                <button onclick="stopGame()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            </div>
        </div>

        <div class="sidebar">
            <h3>ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h3>
            <div id="leaderboard" class="player-list"></div>
        </div>
    </div>
</div>

<!-- ===== Round Result Page ===== -->
<div id="roundResult" style="display:none;">
    <h2>ğŸ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬ÙˆÙ„Ø© ğŸ†</h2>
    <div id="roundScores" class="player-list"></div>
    <p>Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 5 Ø«ÙˆØ§Ù†ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©...</p>
</div>

<script>
let players = [];
let playerName = "";
let playerScore = 0;
let roundTime = 15;
let roundInterval = null;
let currentRound = 0;
let images = [
    {left:"https://picsum.photos/id/1015/400/300", right:"https://picsum.photos/id/1015/400/300"},
    {left:"https://picsum.photos/id/1016/400/300", right:"https://picsum.photos/id/1016/400/300"},
    {left:"https://picsum.photos/id/1018/400/300", right:"https://picsum.photos/id/1018/400/300"},
    {left:"https://picsum.photos/id/1020/400/300", right:"https://picsum.photos/id/1020/400/300"},
    {left:"https://picsum.photos/id/1024/400/300", right:"https://picsum.photos/id/1024/400/300"}
];
let gameActive = false;
let adminPassword = "POLO FAMILY";

// ===== Landing/Login =====
function enterGame() {
    const nameInput = document.getElementById("playerName").value.trim();
    const passInput = document.getElementById("gamePassword").value.trim();
    if(passInput !== adminPassword) {document.getElementById("loginError").innerText="âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©"; return;}
    if(nameInput==="") {document.getElementById("loginError").innerText="âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…"; return;}
    playerName = nameInput;
    players.push({name:playerName, score:0});
    document.getElementById("loginPage").style.display="none";
    document.getElementById("gamePage").style.display="block";
    document.getElementById("welcomePlayer").innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${playerName} ğŸ®`;
    updateLeaderboard();
    // Show admin controls only for first player (admin)
    document.getElementById("adminControls").style.display="block";
}

// ===== Start Round =====
function startRound() {
    gameActive = true;
    playerScore = 0;
    document.getElementById("playerScore").innerText=playerScore;
    currentRound++;
    loadImages();
    roundTime=15;
    document.getElementById("roundTimer").innerText=roundTime;
    roundInterval = setInterval(() => {
        if(roundTime>0){ roundTime--; document.getElementById("roundTimer").innerText=roundTime; }
        else { endRound(); }
    },1000);
}

// ===== Load Images =====
function loadImages() {
    let img = images[currentRound % images.length];
    document.getElementById("leftImg").src = img.left;
    document.getElementById("rightImg").src = img.right;
}

// ===== Handle Clicks =====
document.getElementById("leftImg").addEventListener("click", () => { scorePoint(); });
document.getElementById("rightImg").addEventListener("click", () => { scorePoint(); });

function scorePoint() {
    if(!gameActive) return;
    playerScore++;
    document.getElementById("playerScore").innerText=playerScore;
    // update player in array
    let p = players.find(p=>p.name===playerName);
    if(p) p.score = playerScore;
    updateLeaderboard();
}

// ===== End Round =====
function endRound() {
    clearInterval(roundInterval);
    gameActive=false;
    showRoundResult();
}

// ===== Show Round Result =====
function showRoundResult() {
    document.getElementById("gamePage").style.display="none";
    document.getElementById("roundResult").style.display="block";
    let html = "";
    players.sort((a,b)=>b.score-a.score);
    players.forEach((p,i)=>{
        html += `<div class="player-item">${i+1}. ${p.name} <span>${p.score} Ù†Ù‚Ø·Ø©</span></div>`;
    });
    document.getElementById("roundScores").innerHTML=html;
    setTimeout(() => {
        document.getElementById("roundResult").style.display="none";
        document.getElementById("gamePage").style.display="block";
        startRound();
    },5000); // 5 seconds wait
}

// ===== Update Leaderboard =====
function updateLeaderboard() {
    let html="";
    players.sort((a,b)=>b.score-a.score);
    players.forEach((p,i)=>{
        html += `<div class="player-item">${i+1}. ${p.name} <span>${p.score}</span></div>`;
    });
    document.getElementById("leaderboard").innerHTML = html;
}

// ===== Stop Game =====
function stopGame() {
    clearInterval(roundInterval);
    alert("â¹ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø¯Ù…Ù†");
    gameActive=false;
}
</script>

</body>
</html>
