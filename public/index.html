<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POLO - Ù„Ø¹Ø¨Ø© Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØµÙˆØ±</title>
<style>
/* -------- Ø¹Ø§Ù… -------- */
body {
    margin:0;
    padding:0;
    font-family:Cairo, sans-serif;
    background: linear-gradient(135deg,#06242e,#0d5265);
    color:white;
    text-align:center;
}
h1 { font-size:48px;margin-bottom:20px;color:#ffd700; }

/* ---- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---- */
#loginPage { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
button { padding:12px 20px; border-radius:30px; border:none; margin:10px; font-size:18px; cursor:pointer; background:#1f5568; color:white; transition:0.3s; }
button:hover { background:#3a7d92; }
.loginForm { display:flex; flex-direction:column; align-items:center; background: rgba(0,0,0,0.4); padding:20px; border-radius:20px; margin-top:10px; }
input { padding:10px; margin:5px; border-radius:20px; border:none; font-size:16px; width:200px; }

/* ---- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ---- */
#gamePage { display:none; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; padding:20px; }
.gameRow { display:flex; gap:20px; justify-content:center; margin:10px 0; }
.gameCanvas { width:320px; height:220px; border-radius:25px; border:4px solid #97d4d4; overflow:hidden; display:flex; align-items:center; justify-content:center; background:#f0f0f0; }
.gameCanvas img { width:100%; height:100%; object-fit:cover; cursor:pointer; }
.scoreBoard { margin-top:20px; font-size:20px; }
.resultsTable { display:none; margin-top:20px; border-collapse:collapse; width:80%; color:#000; background:#fff; border-radius:15px; overflow:hidden; }
.resultsTable th, .resultsTable td { border:1px solid #333; padding:8px; }
.adminControls { display:none; margin:10px 0; }
</style>
</head>
<body>

<!-- -------- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -------- -->
<div id="loginPage">
    <h1>ğŸ”¥ POLO ğŸ”¥</h1>
    <div>
        <button onclick="showForm('player')">Ø¯Ø®ÙˆÙ„ Ù„Ø§Ø¹Ø¨</button>
        <button onclick="showForm('admin')">Ø¯Ø®ÙˆÙ„ Ø£Ø¯Ù…Ù†</button>
    </div>
    <div id="playerForm" class="loginForm" style="display:none;">
        <input id="playerName" placeholder="Ø§Ø³Ù…Ùƒ">
        <input id="playerPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="joinGame(false)">Ø¯Ø®ÙˆÙ„</button>
        <p id="playerError" style="color:red;"></p>
    </div>
    <div id="adminForm" class="loginForm" style="display:none;">
        <input id="adminName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø¯Ù…Ù†">
        <input id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="joinGame(true)">Ø¯Ø®ÙˆÙ„</button>
        <p id="adminError" style="color:red;"></p>
    </div>
</div>

<!-- -------- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -------- -->
<div id="gamePage">
    <h2>Ù…Ø±Ø­Ø¨Ø§ <span id="userDisplay"></span></h2>
    <div class="adminControls" id="adminControls">
        <button onclick="startRound()">â–¶ï¸ Ø§Ù†Ø·Ù„Ø§Ù‚ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
        <button onclick="stopGame()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>
    <div class="gameRow" id="imagesRow">
        <div class="gameCanvas"><img id="leftImage" src=""></div>
        <div class="gameCanvas"><img id="rightImage" src=""></div>
    </div>
    <div class="scoreBoard">
        Ù†Ù‚Ø§Ø·Ùƒ: <span id="playerScore">0</span> |
        Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: <span id="playerCount">0</span>
    </div>
    <table class="resultsTable" id="resultsTable">
        <thead><tr><th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th><th>Ù†Ù‚Ø§Ø·Ù‡</th></tr></thead>
        <tbody id="resultsBody"></tbody>
    </table>
</div>

<script>
// -------- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ --------
function showForm(type){
    document.getElementById('playerForm').style.display=(type==='player')?'flex':'none';
    document.getElementById('adminForm').style.display=(type==='admin')?'flex':'none';
}

let isAdmin=false;
let playerName='';
let players=[]; // [{name, score}]
let currentScore=0;
let roundTime=15; // 15 sec
let timer=null;
let roundNumber=0;

function joinGame(admin){
    if(admin){
        const pass=document.getElementById('adminPass').value;
        if(pass!=='ADMINPOLO'){document.getElementById('adminError').innerText='âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©'; return;}
        isAdmin=true;
        playerName=document.getElementById('adminName').value||'Ø£Ø¯Ù…Ù†';
        players.push({name:playerName,score:0});
    } else {
        const pass=document.getElementById('playerPass').value;
        if(pass!=='POLO FAMILY'){document.getElementById('playerError').innerText='âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©'; return;}
        playerName=document.getElementById('playerName').value||'Ù„Ø§Ø¹Ø¨';
        players.push({name:playerName,score:0});
    }
    document.getElementById('loginPage').style.display='none';
    document.getElementById('gamePage').style.display='flex';
    document.getElementById('userDisplay').innerText=playerName;
    document.getElementById('playerCount').innerText=players.length;
    if(isAdmin) document.getElementById('adminControls').style.display='block';
    loadImages();
}

// -------- Ø§Ù„ØµÙˆØ± --------
const images=[ // Ù‡Ù†Ø§ Ù†Ø¶Ø¹ ØµÙˆØ± Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
    "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80",
    "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=400&q=80",
    "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&w=400&q=80",
    "https://images.unsplash.com/photo-1483683804023-6ccdb62f86ef?auto=format&fit=crop&w=400&q=80",
    "https://images.unsplash.com/photo-1491553895911-0055eca6402d?auto=format&fit=crop&w=400&q=80",
    "https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=400&q=80"
];
function loadImages(){
    const left=document.getElementById('leftImage');
    const right=document.getElementById('rightImage');
    const img=images[Math.floor(Math.random()*images.length)];
    left.src=img;
    right.src=img;
}

// -------- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬ÙˆÙ„Ø§Øª --------
function startRound(){
    currentScore=0;
    roundNumber++;
    document.getElementById('playerScore').innerText=currentScore;
    document.getElementById('resultsTable').style.display='none';
    document.getElementById('imagesRow').style.display='flex';
    loadImages();
    let time=roundTime;
    timer=setInterval(()=>{
        time--;
        if(time<=0){
            clearInterval(timer);
            endRound();
        }
    },1000);
}

function stopGame(){
    clearInterval(timer);
    alert('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©');
}

// -------- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ --------
function endRound(){
    // ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø· ÙˆÙ‡Ù…ÙŠØ© Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨
    players.forEach(p=>{p.score+=Math.floor(Math.random()*5)+1;});
    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    const tbody=document.getElementById('resultsBody');
    tbody.innerHTML='';
    players.sort((a,b)=>b.score-a.score);
    players.forEach(p=>{
        const row=document.createElement('tr');
        row.innerHTML=`<td>${p.name}</td><td>${p.score}</td>`;
        tbody.appendChild(row);
    });
    document.getElementById('imagesRow').style.display='none';
    document.getElementById('resultsTable').style.display='table';
    // Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†ÙŠ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
    setTimeout(()=>{
        if(isAdmin) startRound();
    },10000);
}
</script>

</body>
</html>
