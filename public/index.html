<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØµÙˆØ± - Flashi</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo','Segoe UI',sans-serif; }
    body { background: linear-gradient(145deg,#0a1c23 0%,#06242e 100%); display:flex; justify-content:center; align-items:center; min-height:100vh; padding:15px; }
    .game-wrapper { max-width:1600px; width:100%; display:flex; gap:20px; flex-wrap:wrap; justify-content:center; }
    .main-game { flex:2; min-width:700px; background:#1f5568; border-radius:60px 60px 40px 40px; padding:30px 25px; box-shadow:0 25px 35px rgba(0,0,0,0.7); border:3px solid #6ec3d4; color:white; }
    .sidebar { flex:1; min-width:350px; display:flex; flex-direction:column; gap:20px; }
    .flashi-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; font-weight:bold; color:#fff; }
    .logo span { background:#0f3a44; color:#fecb57; padding:6px 18px; border-radius:40px; font-size:18px; margin-right:10px; }
    .game-canvas { width:320px; height:220px; border-radius:25px; border:4px solid #97d4d4; background:#f0f0f0; display:flex; align-items:center; justify-content:center; overflow:hidden; margin-bottom:15px; cursor:pointer; }
    .score-timer { display:flex; justify-content:space-between; margin-top:20px; font-size:20px; }
    .chat-panel { background:#0e2e3a; border-radius:50px; padding:25px; color:white; display:flex; flex-direction:column; height:400px; }
    .chat-messages { flex:1; overflow-y:auto; margin-bottom:10px; }
    .chat-message { padding:10px 15px; border-radius:25px; background:#1e4e5c; margin-bottom:5px; }
    .chat-message-admin { background:#3a4a5a; border-right:4px solid #ff6b6b; }
    .chat-input { padding:10px 15px; border-radius:40px; border:none; flex:1; }
    .btn { padding:10px 20px; border-radius:40px; border:none; cursor:pointer; margin:3px; }
</style>
</head>
<body>

<!-- ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="poloLoginPage" style="text-align:center; color:white;">
    <h1 style="font-size:50px; margin-bottom:30px;">ğŸ”¥ POLO ğŸ”¥</h1>
    <input type="text" id="poloPlayerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:10px 20px; border-radius:40px; border:none; font-size:18px; margin-bottom:15px;"><br>
    <input type="password" id="poloPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="padding:10px 20px; border-radius:40px; border:none; font-size:18px; margin-bottom:15px;"><br>
    <button id="poloEnterBtn" class="btn" style="background:#fecb57; font-size:18px;">Ø¯Ø®ÙˆÙ„</button>
    <p id="poloError" style="color:red; margin-top:10px;"></p>
</div>

<!-- Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div class="game-wrapper" id="mainGame" style="display:none;">

    <div class="main-game">
        <div class="flashi-header">
            <div class="logo">ğŸ¯ Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØµÙˆØ± <span>Flashi</span></div>
            <div>ğŸŸ¢ Ù†Ø´Ø· | Ø§Ù„ØºØ±ÙØ©: <span id="roomCodeDisplay"></span></div>
        </div>

        <div class="player-panel">
            <input type="text" id="playerNameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:8px 15px; border-radius:40px; border:none;">
            <button id="enterGameBtn" class="btn" style="background:#fdca40;">ğŸšª Ø¯Ø®ÙˆÙ„</button>
        </div>

        <div class="game-canvas" id="leftImage">ØµÙˆØ±Ø© Ø£</div>
        <div class="game-canvas" id="rightImage">ØµÙˆØ±Ø© Ø¨</div>

        <div class="score-timer">
            <div>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="scoreDisplay">0</span></div>
            <div>Ø§Ù„ÙˆÙ‚Øª: <span id="timerDisplay">20</span></div>
            <div>Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span id="differencesLeft">5</span></div>
        </div>

        <div id="messageBox" style="margin-top:15px; background:#fbdfa5; padding:10px; border-radius:20px; color:#1a4a55; text-align:center;">â° ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
    </div>

    <div class="sidebar">
        <div class="chat-panel">
            <div style="margin-bottom:10px;">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</div>
            <div id="chatMessages" class="chat-messages"></div>
            <div style="display:flex; gap:5px;"><input type="text" id="chatInput" class="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."><button id="sendChatBtn" class="btn" style="background:#fdca40;">ğŸ“¨</button></div>
        </div>
    </div>

</div>

<script>
// ------------------------------------------------------
// Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
// ------------------------------------------------------
let playerName = "Ø²Ø§Ø¦Ø±";
let currentScore = 0;
let totalScore = 0;
let timeSeconds = 20;
let gameActive = false;
let currentLevel = 0;
let timerIntervalId = null;
let differencesLeft = 5;

const levels = [
    {leftImage:'https://i.pinimg.com/736x/e3/43/2c/e3432cfb9c3e3b0f6c0c7a3e0e3c0b0c.jpg', rightImage:'https://i.pinimg.com/736x/e3/43/2c/e3432cfb9c3e3b0f6c0c7a3e0e3c0b0c.jpg', differencesCount:5},
    {leftImage:'https://i.pinimg.com/736x/8a/1b/4c/8a1b4c0b3a5f2d1e6c7a8b9c0d1e2f3a.jpg', rightImage:'https://i.pinimg.com/736x/8a/1b/4c/8a1b4c0b3a5f2d1e6c7a8b9c0d1e2f3a.jpg', differencesCount:5}
];

const leftImageDiv = document.getElementById('leftImage');
const rightImageDiv = document.getElementById('rightImage');
const scoreDisplay = document.getElementById('scoreDisplay');
const timerDisplay = document.getElementById('timerDisplay');
const differencesDisplay = document.getElementById('differencesLeft');
const messageBox = document.getElementById('messageBox');

// ------------------------------------------------------
// ØµÙØ­Ø© POLO Login
// ------------------------------------------------------
document.getElementById('poloEnterBtn').addEventListener('click',()=>{
    const name = document.getElementById('poloPlayerName').value.trim();
    const password = document.getElementById('poloPassword').value.trim();
    const errorEl = document.getElementById('poloError');
    errorEl.innerText='';

    if(password !== 'POLO FAMILY'){ errorEl.innerText='âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'; return; }
    if(name===''){ errorEl.innerText='âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…'; return; }

    playerName = name;
    document.getElementById('playerNameInput').value = name;
    document.getElementById('poloLoginPage').style.display='none';
    document.getElementById('mainGame').style.display='flex';

    startGame();
});

// ------------------------------------------------------
// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
// ------------------------------------------------------
function startGame(){
    gameActive = true;
    currentLevel = 0;
    currentScore = 0;
    differencesLeft = levels[currentLevel].differencesCount;
    scoreDisplay.innerText=currentScore;
    differencesDisplay.innerText=differencesLeft;
    loadLevel(currentLevel);
    startTimer();
    messageBox.innerText=`ğŸ”¥ Ø§Ø¨Ø­Ø« Ø¹Ù† ${differencesLeft} Ø§Ø®ØªÙ„Ø§ÙØ§Øª ÙŠØ§ ${playerName}`;
}

function loadLevel(index){
    leftImageDiv.style.backgroundImage = `url(${levels[index].leftImage})`;
    rightImageDiv.style.backgroundImage = `url(${levels[index].rightImage})`;
    leftImageDiv.innerText=''; rightImageDiv.innerText='';
}

function startTimer(){
    clearInterval(timerIntervalId);
    timeSeconds=20;
    timerDisplay.innerText=timeSeconds;
    timerIntervalId=setInterval(()=>{
        if(timeSeconds>0){ timeSeconds--; timerDisplay.innerText=timeSeconds; }
        else endLevel(false);
    },1000);
}

function endLevel(won){
    clearInterval(timerIntervalId);
    messageBox.innerText = won ? 'ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª!' : 'â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!';
    setTimeout(()=>{
        currentLevel = (currentLevel+1)%levels.length;
        differencesLeft = levels[currentLevel].differencesCount;
        scoreDisplay.innerText=0;
        differencesDisplay.innerText=differencesLeft;
        loadLevel(currentLevel);
        startTimer();
        messageBox.innerText=`ğŸ”¥ Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${currentLevel+1} Ø§Ø¨Ø­Ø« Ø¹Ù† ${differencesLeft} Ø§Ø®ØªÙ„Ø§ÙØ§Øª!`;
    },3000);
}

// ------------------------------------------------------
// ØªÙØ§Ø¹Ù„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©
// ------------------------------------------------------
[leftImageDiv,rightImageDiv].forEach(imgDiv => {
    imgDiv.addEventListener('click',()=>{
        if(!gameActive) return;
        currentScore++;
        differencesLeft--;
        scoreDisplay.innerText=currentScore;
        differencesDisplay.innerText=differencesLeft;
        if(differencesLeft<=0) endLevel(true);
    });
});

</script>
</body>
</html>
